{"uid":"158a0f1ec745b39f","name":"Existing Reference - Initialize Transaction","fullName":"Initialize Transaction#Existing Reference - Initialize Transaction","historyId":"f8115111-6c3a-4f4a-9b83-0c1358292a9b","time":{"start":1712338514904,"stop":1712338515033,"duration":129},"description":"There are three main stages in S2S charge:\n\n1.  *Initiate the payment*: You send the transaction details and the customer's card details to *transaction*/*initialize* endpoints.\n2.  *Authorize the charge*: Render the HTML content returned in data on your payment checkout interface or alternatively redirect to the alt URL. The customer authorizes the charge with their payment provider, such as their card issuer or bank. This completes the payer authentication.\n3.  *Verify the payment*: You'll call our *Verify Transaction API* to verify that the payment was successful before giving value (the *verify transaction* endpoint) or wait to receive webhook notification.\n    \n\n**Request**\n\nemail: *customer email*  \namount: *transaction amount*  \ncurrency: *transaction currency*  \nreference: *unique reference must be atleast 16 unique characters*  \ncard: *Kindly pass the response of the encrypted card reference.*\n\n**Response**\n\ndata: *Kindly render this in the HTML.*\n\nalt: *Incase you are unable to render the data in HTML, you can make use of alt link.*\n\n**Additional Info**\n\nAfter successful transaction, a webhook event will be initiated and sent to the webhook url you set on the dashboard.\n\nYou are expected to call verify transaction endpoint to know the outcome of transaction.","descriptionHtml":"There are three main stages in S2S charge:<br><br>1.  Initiate the payment: You send the transaction details and the customer's card details to transaction/initialize endpoints.<br>2.  Authorize the charge: Render the HTML content returned in data on your payment checkout interface or alternatively redirect to the alt URL. The customer authorizes the charge with their payment provider, such as their card issuer or bank. This completes the payer authentication.<br>3.  Verify the payment: You'll call our Verify Transaction API to verify that the payment was successful before giving value (the verify transaction endpoint) or wait to receive webhook notification.<br>    <br><br>Request<br><br>email: customer email  <br>amount: transaction amount  <br>currency: transaction currency  <br>reference: unique reference must be atleast 16 unique characters  <br>card: Kindly pass the response of the encrypted card reference.<br><br>Response<br><br>data: Kindly render this in the HTML.<br><br>alt: Incase you are unable to render the data in HTML, you can make use of alt link.<br><br>Additional Info<br><br>After successful transaction, a webhook event will be initiated and sent to the webhook url you set on the dashboard.<br><br>You are expected to call verify transaction endpoint to know the outcome of transaction.","status":"failed","statusMessage":"Status code is 400, Status code name has 'Bad Request', Verify that message returns 'Reference Already Exist'","flaky":false,"newFailed":false,"newBroken":false,"newPassed":false,"retriesCount":0,"retriesStatusChange":false,"beforeStages":[],"testStage":{"description":"There are three main stages in S2S charge:\n\n1.  *Initiate the payment*: You send the transaction details and the customer's card details to *transaction*/*initialize* endpoints.\n2.  *Authorize the charge*: Render the HTML content returned in data on your payment checkout interface or alternatively redirect to the alt URL. The customer authorizes the charge with their payment provider, such as their card issuer or bank. This completes the payer authentication.\n3.  *Verify the payment*: You'll call our *Verify Transaction API* to verify that the payment was successful before giving value (the *verify transaction* endpoint) or wait to receive webhook notification.\n    \n\n**Request**\n\nemail: *customer email*  \namount: *transaction amount*  \ncurrency: *transaction currency*  \nreference: *unique reference must be atleast 16 unique characters*  \ncard: *Kindly pass the response of the encrypted card reference.*\n\n**Response**\n\ndata: *Kindly render this in the HTML.*\n\nalt: *Incase you are unable to render the data in HTML, you can make use of alt link.*\n\n**Additional Info**\n\nAfter successful transaction, a webhook event will be initiated and sent to the webhook url you set on the dashboard.\n\nYou are expected to call verify transaction endpoint to know the outcome of transaction.","descriptionHtml":"There are three main stages in S2S charge:<br><br>1.  Initiate the payment: You send the transaction details and the customer's card details to transaction/initialize endpoints.<br>2.  Authorize the charge: Render the HTML content returned in data on your payment checkout interface or alternatively redirect to the alt URL. The customer authorizes the charge with their payment provider, such as their card issuer or bank. This completes the payer authentication.<br>3.  Verify the payment: You'll call our Verify Transaction API to verify that the payment was successful before giving value (the verify transaction endpoint) or wait to receive webhook notification.<br>    <br><br>Request<br><br>email: customer email  <br>amount: transaction amount  <br>currency: transaction currency  <br>reference: unique reference must be atleast 16 unique characters  <br>card: Kindly pass the response of the encrypted card reference.<br><br>Response<br><br>data: Kindly render this in the HTML.<br><br>alt: Incase you are unable to render the data in HTML, you can make use of alt link.<br><br>Additional Info<br><br>After successful transaction, a webhook event will be initiated and sent to the webhook url you set on the dashboard.<br><br>You are expected to call verify transaction endpoint to know the outcome of transaction.","status":"failed","statusMessage":"Status code is 400, Status code name has 'Bad Request', Verify that message returns 'Reference Already Exist'","steps":[{"name":"Status code is 400","time":{"start":1712338515028,"stop":1712338515028,"duration":0},"status":"failed","statusMessage":"expected response to have status code 400 but got 200","statusTrace":"Error: expected response to have status code 400 but got 200\n    at eval (eval at exec (evalmachine.<anonymous>:66:1818546), <anonymous>:5:25)\n    at e.test (evalmachine.<anonymous>:66:11560)\n    at Object.eval (eval at exec (evalmachine.<anonymous>:66:1818546), <anonymous>:4:4)\n    at u.exec (evalmachine.<anonymous>:66:1818581)\n    at t.exports (evalmachine.<anonymous>:66:5826)\n    at Object.<anonymous> (evalmachine.<anonymous>:66:8225)\n    at evalmachine.<anonymous>:15:26\n    at Array.forEach (<anonymous>)\n    at Object.emit (evalmachine.<anonymous>:14:59)\n    at evalmachine.<anonymous>:59:24","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Status code name has 'Bad Request'","time":{"start":1712338515029,"stop":1712338515029,"duration":0},"status":"failed","statusMessage":"expected response to have status reason 'Bad Request' but got 'OK'","statusTrace":"Error: expected response to have status reason 'Bad Request' but got 'OK'\n    at eval (eval at exec (evalmachine.<anonymous>:66:1818546), <anonymous>:8:25)\n    at e.test (evalmachine.<anonymous>:66:11560)\n    at Object.eval (eval at exec (evalmachine.<anonymous>:66:1818546), <anonymous>:7:4)\n    at u.exec (evalmachine.<anonymous>:66:1818581)\n    at t.exports (evalmachine.<anonymous>:66:5826)\n    at Object.<anonymous> (evalmachine.<anonymous>:66:8225)\n    at evalmachine.<anonymous>:15:26\n    at Array.forEach (<anonymous>)\n    at Object.emit (evalmachine.<anonymous>:14:59)\n    at evalmachine.<anonymous>:59:24","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false},{"name":"Verify that status is 'false'","time":{"start":1712338515029,"stop":1712338515029,"duration":0},"status":"passed","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":false,"stepsCount":0,"attachmentsCount":0,"hasContent":false,"attachmentStep":false},{"name":"Verify that message returns 'Reference Already Exist'","time":{"start":1712338515030,"stop":1712338515030,"duration":0},"status":"failed","statusMessage":"expected '{\"status\":false,\"message\":\"Kindly che…' to include 'Reference Already Exist'","statusTrace":"Error: expected '{\"status\":false,\"message\":\"Kindly che…' to include 'Reference Already Exist'\n    at eval (eval at exec (evalmachine.<anonymous>:66:1818546), <anonymous>:14:38)\n    at e.test (evalmachine.<anonymous>:66:11560)\n    at Object.eval (eval at exec (evalmachine.<anonymous>:66:1818546), <anonymous>:13:4)\n    at u.exec (evalmachine.<anonymous>:66:1818581)\n    at t.exports (evalmachine.<anonymous>:66:5826)\n    at Object.<anonymous> (evalmachine.<anonymous>:66:8225)\n    at evalmachine.<anonymous>:15:26\n    at Array.forEach (<anonymous>)\n    at Object.emit (evalmachine.<anonymous>:14:59)\n    at evalmachine.<anonymous>:59:24","steps":[],"attachments":[],"parameters":[],"shouldDisplayMessage":true,"stepsCount":0,"attachmentsCount":0,"hasContent":true,"attachmentStep":false}],"attachments":[{"uid":"93087028e08182a9","name":"Request Headers","source":"93087028e08182a9.json","type":"application/json","size":479},{"uid":"5d48fe62d7036e18","name":"Request Body","source":"5d48fe62d7036e18.txt","type":"text/plain","size":336},{"uid":"502ce5f5da2ad756","name":"Response Headers","source":"502ce5f5da2ad756.json","type":"application/json","size":276},{"uid":"5c200c18a1a42a50","name":"Response Body","source":"5c200c18a1a42a50.txt","type":"text/plain","size":62}],"parameters":[],"shouldDisplayMessage":true,"stepsCount":4,"attachmentsCount":4,"hasContent":true,"attachmentStep":false},"afterStages":[],"labels":[{"name":"parentSuite","value":"Initialize Transaction"},{"name":"resultFormat","value":"allure2"}],"parameters":[{"name":"Request","value":"POST - https://api.stag.duplopg.com/api/s2s/transaction/initialize"},{"name":"Response Code","value":"200"}],"links":[],"hidden":false,"retry":false,"extra":{"severity":"normal","retries":[],"categories":[{"name":"Product defects","matchedStatuses":[],"flaky":false}],"tags":[]},"source":"158a0f1ec745b39f.json","parameterValues":["POST - https://api.stag.duplopg.com/api/s2s/transaction/initialize","200"]}